<div class="row posts-wrapper">
  <!--  this cycles through the objects in the @posts variable-->
  <% @posts.each do |post| %>
    <div class="post text-center">
      <div class="post-head">
        <div class="thumb-img">
          <div class="name">
            <%= post.user.user_name %>
          </div>
        </div>
      </div>
      <!--  This was in the post-head and that was causing it to be all funny-->
      <div class="image center-block">
        <!-- this is the original image link that Ben used, but it didn't work for me
        <%= link_to (image_tag post.image.url(:medium), class:'imgresponsive'), post_path(post) %> -->
        <%= link_to(image_tag(post.image, size: '500x500', class:'imgresponsive'), post_path(post)) %>
      </div>
      <div class="post-bottom">
        <div class="caption">
          <div class="user-name">
            <%= post.user.user_name %>
          </div>
          <%= post.caption %>
        </div>
        <% if post.comments %>
          <% post.comments.each do |comment| %>
            <div class="comment">
              <div class="user-name">
                <p>User name: <%= comment.user.user_name %></p>
              </div>
              <div class="comment-content">
                <p>Content: <%= comment.content %></p>
              </div>
              <!--  makes sure the comment is made by the user currently logged in, if so they can delete-->
              <% if comment.user == current_user %>
                <%= link_to "Delete", post_comment_path(post, comment), method: :delete, data: { confirm: "Are you sure?" } %>
              <% end %>
          <% end %>
            </div>
        <div class="comment-form">
          <%= form_for [post, post.comments.new] do |f| %>
            <%= f.text_field :content, placeholder: 'Add a comment...' %>
          <% end %>
        </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
